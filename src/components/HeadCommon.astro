---
import "../styles/global.css";
import "../styles/index.css";
import "../styles/theme.css";
import "@fontsource/ia-writer-duo/400-italic.css";
---

<!-- Global Metadata -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width" />
<meta
  name="theme-color"
  content="hsl(256, 44%, 15%)"
  media="(prefers-color-scheme: dark)"
/>
<meta
  name="theme-color"
  content="hsl(273, 37%, 93%)"
  media="(prefers-color-scheme: light)"
/>
<link rel="sitemap" href="/sitemap-index.xml" />
<link rel="alternate" type="application/rss+xml" href="/rss.xml" />
<link rel="apple-touch-icon" type="image/png" sizes="192x192" href="/img/icon-192x192.png">
<link rel="icon" type="image/png" sizes="192x192" href="/img/icon-192x192.png">
<link rel="icon" type="image/png" sizes="64x64" href="/img/icon-64x64.png">
<link rel="icon" type="image/png" sizes="48x48" href="/img/icon-48x48.png">
<link rel="icon" type="image/png" sizes="32x32" href="/img/icon-32x32.png">
<link rel="icon" type="image/png" sizes="32x32" href="/img/icon-24x24.png">
<link rel="icon" type="image/png" sizes="16x16" href="/img/icon-16x16.png">

<!-- This is intentionally inlined to avoid FOUC -->
<script>
  const root = document.documentElement;
  const theme = localStorage.getItem("theme");
  if (
    theme === "dark" ||
    (!theme && window.matchMedia("(prefers-color-scheme: dark)").matches)
  ) {
    root.classList.add("theme-dark");
  } else {
    root.classList.remove("theme-dark");
  }
</script>

<!-- Double-click to highlight code blocks (inline only). -->
<script>
  document.addEventListener("dblclick", (el) => {

    const node = el.target as Node;

    if (!node) return;
    if (node.nodeName !== "CODE") return;
    if (node.parentElement?.nodeName === "PRE") return;

    let range = new Range();
    range.setStart(node, 0);
    range.setEnd(node, 1);
    const selection = document.getSelection();
    if (selection) {
      selection.removeAllRanges();
      selection.addRange(range);
    }
  });
</script>
